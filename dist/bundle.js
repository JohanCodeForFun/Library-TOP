(()=>{"use strict";var e={d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Q:()=>y});const t=function(){const e=document.querySelector("#submitBook");function t(e){e.preventDefault();const{title:t,author:r,pages:o,isRead:n}={title:document.querySelector("#inputTitle").value,author:document.querySelector("#inputAuthor").value,pages:parseInt(document.querySelector("#inputPages").value,10),isRead:document.querySelector("#inputIsRead").checked};y.addBook(t,r,o,n)}return{initializeEventListeners:function(){null==e||e.addEventListener("click",t)}}};function r(e,t,r=!0){const o=r?1:-1,n=e.tBodies[0],i=Array.from(n.querySelectorAll("tr")).sort(((e,r)=>e.querySelector(`td:nth-child(${t+1})`).textContent.trim()>r.querySelector(`td:nth-child(${t+1})`).textContent.trim()?1*o:-1*o));for(;n.firstChild;)n.removeChild(n.firstChild);n.append(...i),e.querySelectorAll("th").forEach((e=>e.classList.remove("th-sort-asc","th-sort-desc"))),e.querySelector(`th:nth-child(${t+1})`).classList.toggle("th-sort-asc",r),e.querySelector(`th:nth-child(${t+1})`).classList.toggle("th-sort-desc",!r)}document.querySelectorAll(".table-sortable th").forEach((e=>{e.addEventListener("click",(()=>{var t,o,n;r(null===(o=null===(t=e.parentElement)||void 0===t?void 0:t.parentElement)||void 0===o?void 0:o.parentElement,Array.prototype.indexOf.call(null===(n=e.parentElement)||void 0===n?void 0:n.children,e),!e.classList.contains("th-sort-asc"))}))}));const o=r;var n,i,a,s,l,c=function(e,t,r,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,r):n?n.value=r:t.set(e,r),r},d=function(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)};n=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap;const u=class{constructor(e,t,r,o,d){n.set(this,void 0),i.set(this,void 0),a.set(this,void 0),s.set(this,void 0),l.set(this,void 0),c(this,n,e,"f"),c(this,i,t,"f"),c(this,a,r,"f"),c(this,s,o,"f"),c(this,l,d,"f")}get id(){return d(this,n,"f")}get title(){return d(this,i,"f")}set title(e){c(this,i,e,"f")}get author(){return d(this,a,"f")}set author(e){c(this,a,e,"f")}get pages(){return d(this,s,"f")}set pages(e){c(this,s,e,"f")}get isRead(){return d(this,l,"f")}set isRead(e){c(this,l,e,"f")}},h=document.querySelector('[data-bs-toggle="popover"]');new bootstrap.Popover(h);var f,p=function(e,t,r,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,r):n?n.value=r:t.set(e,r),r},m=function(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)};const v=document.querySelector("#booksBody");f=new WeakMap;document.addEventListener("DOMContentLoaded",(()=>{t().initializeEventListeners();const e=document.querySelector("table");e&&o(e,0,!0)}));const y=new class{constructor(){f.set(this,void 0),p(this,f,[],"f")}addBook(e,t,r,o){const n=0===m(this,f,"f").length?1:Math.max(...m(this,f,"f").map((e=>e.id)))+1,i=new u(n,e,t,r,o);m(this,f,"f").push(i),(()=>{const e=document.querySelector("#modal"),t=document.querySelector('[data-bs-toggle="popover"]'),r=document.querySelector("#submitBook");if(!e||!t||!r)return void console.error("Modal, popover or button element not found");const o=bootstrap.Popover.getInstance(t)||new bootstrap.Popover(t);r.style.pointerEvents="none",r.style.color="lightgray",setTimeout((()=>{(e=>{e.style.display="none",e.setAttribute("aria-hidden","true"),e.removeAttribute("aria-modal"),e.removeAttribute("role"),e.classList.remove("fade");const t=document.querySelector(".modal-backdrop");t&&t.remove()})(e),(e=>{e.style.pointerEvents="",e.style.color=""})(r),o.hide()}),2100)})(),this.loadLibrary()}fillLibrary(){const e=new u(1,"Zero To One","Peter Thiel",210,!0),t=new u(2,"Hackers & Painters","Paul Graham",258,!0),r=new u(3,"Computer Science Distilled","Wladston Ferreira Filho",168,!0),o=new u(4,"Grokking Algorithms","Aditya Y. Bhargava",238,!0),n=new u(5,"START SMALL, STAY SMALL","Rob Walling",201,!1);m(this,f,"f").push(e,t,r,o,n)}loadLibrary(){const e=this.getBooks().map((e=>`\n        <tr>\n          <td> ${e.title} </td>\n          <td> ${e.author} </td>\n          <td> ${e.pages} </td>\n          <td> \n          <div class="form-check">\n          <label class="form-check-label" for="flexCheckDefault-${e.id}">Read</label>\n          <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault-${e.id}" ${this.getCheckedAttribute(e.isRead)}>\n          </div>\n          </td>\n          <td> <button value="${e.id}" class="btn btn-danger">Remove</button> </td>\n        </tr>`)).join("");v.innerHTML=e,this.addDeleteEventListeners(),this.addIsReadEventListeners()}getBooks(){return m(this,f,"f")}removeBook(e){return p(this,f,m(this,f,"f").filter((t=>t.id!==e)),"f"),this.loadLibrary(),m(this,f,"f")}getCheckedAttribute(e){return e?"checked":""}updateIsRead(e){let t=m(this,f,"f").find((t=>t.id===e));t?(t.isRead=!t.isRead,this.loadLibrary()):console.error("no book found")}addDeleteEventListeners(){const e=document.querySelectorAll("button.btn-danger");Array.from(e).map((e=>e)).forEach((e=>{e.addEventListener("click",(e=>{const t=e.target;if(t){const e=parseInt(t.value);y.removeBook(e)}}))}))}addIsReadEventListeners(){const e=document.querySelectorAll('input[type="checkbox"]');Array.from(e).map((e=>e)).filter((e=>"inputIsRead"!==e.id)).forEach((e=>{e.addEventListener("click",(()=>{const t=e.id.match(/\d+$/);if(t){const e=parseInt(t[0],10);y.updateIsRead(e)}else console.error("No numeric part found in the id")}))}))}};y.fillLibrary(),y.loadLibrary()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJQSxFQUFPLENBQ1QsTUFBTVYsRUFBU3ZGLFNBQVNpRyxFQUFNLEdBQUksSUFFbEMvRixFQUFVdUYsYUFBYUYsRUFDekIsTUFDRS9CLFFBQVFDLE1BQU0sa0NBQ2hCLEdBRUEsR0FFTixHQ25HRnZELEVBQVV1RSxjQUVWdkUsRUFBVXNFLGEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saWJyYXJ5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2xpYnJhcnkvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2xpYnJhcnkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9saWJyYXJ5Ly4vc3JjL2Zvcm1IYW5kbGVyLnRzIiwid2VicGFjazovL2xpYnJhcnkvLi9zcmMvc29ydC50cyIsIndlYnBhY2s6Ly9saWJyYXJ5Ly4vc3JjL0Jvb2sudHMiLCJ3ZWJwYWNrOi8vbGlicmFyeS8uL3NyYy9wb3BvdmVyLnRzIiwid2VicGFjazovL2xpYnJhcnkvLi9zcmMvTGlicmFyeS50cyIsIndlYnBhY2s6Ly9saWJyYXJ5Ly4vc3JjL2FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCB7IG15TGlicmFyeSB9IGZyb20gXCIuL2FwcFwiO1xuXG5jb25zdCBGb3JtSGFuZGxlciA9ICgoKSA9PiB7XG4gIGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N1Ym1pdEJvb2tcIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICBmdW5jdGlvbiBnZXRGb3JtVmFsdWVzKCkge1xuICAgICAgY29uc3QgdGl0bGUgPSAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dFRpdGxlXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgY29uc3QgYXV0aG9yID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXRBdXRob3JcIikgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICBjb25zdCBwYWdlcyA9IHBhcnNlSW50KChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0UGFnZXNcIikgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUsIDEwKTtcbiAgICAgIGNvbnN0IGlzUmVhZCA9IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0SXNSZWFkXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQ7XG5cbiAgICAgIHJldHVybiB7IHRpdGxlLCBhdXRob3IsIHBhZ2VzLCBpc1JlYWQgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUZvcm1TdWJtaXNzaW9uKGV2ZW50OiBFdmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IHsgdGl0bGUsIGF1dGhvciwgcGFnZXMsIGlzUmVhZCB9ID0gZ2V0Rm9ybVZhbHVlcygpO1xuXG4gICAgICBteUxpYnJhcnkuYWRkQm9vayh0aXRsZSwgYXV0aG9yLCBwYWdlcywgaXNSZWFkKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0aWFsaXplRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICBzdWJtaXRCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVGb3JtU3VibWlzc2lvbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGluaXRpYWxpemVFdmVudExpc3RlbmVyc1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgY3JlYXRlLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgRm9ybUhhbmRsZXI7IiwiXG4vKipcbiAqIFNvcnRzIHRoZSBib29rc1xuICpcbiAqIEBwYXJhbSB7SFRNTFRhYmxlRWxlbWVudH0gdGFibGUgdGhlIHRhYmxlIHNvcnRcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2x1bW4gdGhlIGluZGV4IG9mIHRoZSBjb2x1bW4gdG8gc29ydFxuICogQHBhcmFtIHtib29sZWFufSBhc2MgZGV0ZXJtaW5lcyBpZiB0aGUgc29ydGluZyB3aWxsIGJlIGFzY2VuZGluZyBvcmRlclxuICovXG5cbmZ1bmN0aW9uIHNvcnRUYWJsZUJ5Q29sdW1uKFxuICB0YWJsZTogSFRNTFRhYmxlRWxlbWVudCxcbiAgY29sdW1uOiBudW1iZXIsXG4gIGFzYyA9IHRydWVcbikge1xuICBjb25zdCBkaXJNb2RpZmllciA9IGFzYyA/IDEgOiAtMTtcbiAgY29uc3QgdEJvZHkgPSB0YWJsZS50Qm9kaWVzWzBdO1xuICBjb25zdCByb3dzID0gQXJyYXkuZnJvbSh0Qm9keS5xdWVyeVNlbGVjdG9yQWxsKFwidHJcIikpO1xuXG4gIC8vIFNvcnQgZWFjaCByb3dcbiAgY29uc3Qgc29ydGVkUm93cyA9IHJvd3Muc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IGFDb2xUZXh0ID0gYS5xdWVyeVNlbGVjdG9yKGB0ZDpudGgtY2hpbGQoJHtjb2x1bW4gKyAxfSlgKSEudGV4dENvbnRlbnQhLnRyaW0oKTtcbiAgICBjb25zdCBiQ29sVGV4dCA9IGIucXVlcnlTZWxlY3RvcihgdGQ6bnRoLWNoaWxkKCR7Y29sdW1uICsgMX0pYCkhLnRleHRDb250ZW50IS50cmltKCk7XG5cbiAgICByZXR1cm4gYUNvbFRleHQgPiBiQ29sVGV4dCA/IDEgKiBkaXJNb2RpZmllciA6IC0xICogZGlyTW9kaWZpZXI7XG4gIH0pO1xuXG4gIC8vIFJlbW92ZSBhbGwgZXhpc3RpbmcgVFJzIGZyb20gdGhlIHRhYmxlXG4gIHdoaWxlICh0Qm9keS5maXJzdENoaWxkKSB7XG4gICAgdEJvZHkucmVtb3ZlQ2hpbGQodEJvZHkuZmlyc3RDaGlsZCk7XG4gIH1cblxuICAvLyBSZS1hZGQgdGhlIG5ld2x5IHNvcnRlZCByb3dzXG4gIHRCb2R5LmFwcGVuZCguLi5zb3J0ZWRSb3dzKTtcblxuICAvLyBSZW1lbWViZXIgaG93IHRoZSBjb2x1bW4gaXMgY3VycmVudGx5IHNvcnRlZFxuICB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKFwidGhcIilcbiAgICAuZm9yRWFjaCgodGgpID0+IHRoLmNsYXNzTGlzdC5yZW1vdmUoXCJ0aC1zb3J0LWFzY1wiLCBcInRoLXNvcnQtZGVzY1wiKSk7XG4gIHRhYmxlLnF1ZXJ5U2VsZWN0b3IoYHRoOm50aC1jaGlsZCgke2NvbHVtbiArIDF9KWApIVxuICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwidGgtc29ydC1hc2NcIiwgYXNjKTtcbiAgdGFibGUucXVlcnlTZWxlY3RvcihgdGg6bnRoLWNoaWxkKCR7Y29sdW1uICsgMX0pYCkhXG4gICAgLmNsYXNzTGlzdC50b2dnbGUoXCJ0aC1zb3J0LWRlc2NcIiwgIWFzYyk7XG59XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFibGUtc29ydGFibGUgdGhcIikuZm9yRWFjaCgoaGVhZGVyQ2VsbCkgPT4ge1xuICBoZWFkZXJDZWxsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgLy8gY29uc3QgdGFibGVFbGVtZW50ID0gaGVhZGVyQ2VsbC5jbG9zZXN0KCcudGFibGUnKTtcbiAgICBjb25zdCB0YWJsZUVsZW1lbnQgPSBoZWFkZXJDZWxsLnBhcmVudEVsZW1lbnQ/LnBhcmVudEVsZW1lbnRcbiAgICAgID8ucGFyZW50RWxlbWVudCBhcyBIVE1MVGFibGVFbGVtZW50O1xuICAgIGNvbnN0IGhlYWRlckluZGV4ID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChcbiAgICAgIGhlYWRlckNlbGwucGFyZW50RWxlbWVudD8uY2hpbGRyZW4sXG4gICAgICBoZWFkZXJDZWxsXG4gICAgKTtcbiAgICBjb25zdCBjdXJyZW50SXNBc2NlbmRpbmcgPSBoZWFkZXJDZWxsLmNsYXNzTGlzdC5jb250YWlucyhcInRoLXNvcnQtYXNjXCIpO1xuXG4gICAgc29ydFRhYmxlQnlDb2x1bW4odGFibGVFbGVtZW50LCBoZWFkZXJJbmRleCwgIWN1cnJlbnRJc0FzY2VuZGluZyk7XG4gIH0pO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHNvcnRUYWJsZUJ5Q29sdW1uOyIsImNsYXNzIEJvb2sge1xuICAjaWQ6IG51bWJlcjtcbiAgI3RpdGxlOiBzdHJpbmc7XG4gICNhdXRob3I6IHN0cmluZztcbiAgI3BhZ2VzOiBudW1iZXI7XG4gICNpc1JlYWQ6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgdGl0bGU6IHN0cmluZywgYXV0aG9yOiBzdHJpbmcsIHBhZ2VzOiBudW1iZXIsIGlzUmVhZDogYm9vbGVhbikge1xuICAgIHRoaXMuI2lkID0gaWQ7XG4gICAgdGhpcy4jdGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLiNhdXRob3IgPSBhdXRob3I7XG4gICAgdGhpcy4jcGFnZXMgPSBwYWdlcztcbiAgICB0aGlzLiNpc1JlYWQgPSBpc1JlYWQ7XG4gIH1cblxuICBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2lkO1xuICB9XG5cbiAgZ2V0IHRpdGxlKCkge1xuICAgIHJldHVybiB0aGlzLiN0aXRsZTtcbiAgfVxuXG4gIHNldCB0aXRsZShuZXdUaXRsZTogc3RyaW5nKSB7XG4gICAgdGhpcy4jdGl0bGUgPSBuZXdUaXRsZTtcbiAgfVxuXG4gIGdldCBhdXRob3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2F1dGhvcjtcbiAgfVxuXG4gIHNldCBhdXRob3IobmV3QXV0aG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLiNhdXRob3IgPSBuZXdBdXRob3I7XG4gIH1cblxuICBnZXQgcGFnZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3BhZ2VzO1xuICB9XG5cbiAgc2V0IHBhZ2VzKG5ld1BhZ2VzOiBudW1iZXIpIHtcbiAgICB0aGlzLiNwYWdlcyA9IG5ld1BhZ2VzO1xuICB9XG5cbiAgZ2V0IGlzUmVhZCgpIHtcbiAgICByZXR1cm4gdGhpcy4jaXNSZWFkO1xuICB9XG5cbiAgc2V0IGlzUmVhZChuZXdJc1JlYWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLiNpc1JlYWQgPSBuZXdJc1JlYWQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQm9vazsiLCJkZWNsYXJlIGxldCBib290c3RyYXA6IGFueTtcblxuLy8gaW5pdGlhbGl6ZSBwb3BvdmVycyBmb3IgbW9kYWwsIHN1Y2Nlc2Z1bGx5IGFkZCBib29rIHRvIGxpc3RcbmNvbnN0IHBvcG92ZXJUcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJ1tkYXRhLWJzLXRvZ2dsZT1cInBvcG92ZXJcIl0nXG4pO1xubmV3IGJvb3RzdHJhcC5Qb3BvdmVyKHBvcG92ZXJUcmlnZ2VyKTtcblxuZXhwb3J0IGNvbnN0IHRyaWdnZXJQb3BvdmVyID0gKCkgPT4ge1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbCcpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgY29uc3QgbW9kYWxQb3BvdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYnMtdG9nZ2xlPVwicG9wb3ZlclwiXScpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgY29uc3QgYnV0dG9uTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdWJtaXRCb29rJykgYXMgSFRNTEFuY2hvckVsZW1lbnQgfCBudWxsO1xuXG5cbiAgaWYgKCFtb2RhbCB8fCAhbW9kYWxQb3BvdmVyIHx8ICFidXR0b25MaW5rKSB7XG4gICAgY29uc29sZS5lcnJvcignTW9kYWwsIHBvcG92ZXIgb3IgYnV0dG9uIGVsZW1lbnQgbm90IGZvdW5kJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgcG9wb3Zlckluc3RhbmNlID0gYm9vdHN0cmFwLlBvcG92ZXIuZ2V0SW5zdGFuY2UobW9kYWxQb3BvdmVyKSB8fCBuZXcgYm9vdHN0cmFwLlBvcG92ZXIobW9kYWxQb3BvdmVyKTtcblxuICBidXR0b25MaW5rLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gIGJ1dHRvbkxpbmsuc3R5bGUuY29sb3IgPSAnbGlnaHRncmF5JztcblxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBoaWRlTW9kYWwobW9kYWwpO1xuICAgIHJlc3RCdXR0b25MaW5rKGJ1dHRvbkxpbmspO1xuICAgIHBvcG92ZXJJbnN0YW5jZS5oaWRlKCk7XG4gIH0sIDIxMDApO1xufVxuXG5jb25zdCBoaWRlTW9kYWwgPSAobW9kYWw6IEhUTUxFbGVtZW50KSA9PiB7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICBtb2RhbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKVxuICBtb2RhbC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnKVxuICBtb2RhbC5yZW1vdmVBdHRyaWJ1dGUoJ3JvbGUnKVxuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiZmFkZVwiKTtcblxuICBjb25zdCBiYWNrZHJvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1iYWNrZHJvcCcpXG4gIFxuICBpZiAoIWJhY2tkcm9wKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGJhY2tkcm9wLnJlbW92ZSgpO1xufVxuXG5jb25zdCByZXN0QnV0dG9uTGluayA9IChidXR0b25MaW5rOiBIVE1MQW5jaG9yRWxlbWVudCkgPT4ge1xuICBidXR0b25MaW5rLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnJztcbiAgYnV0dG9uTGluay5zdHlsZS5jb2xvciA9ICcnO1xufVxuIiwiaW1wb3J0IHsgbXlMaWJyYXJ5IH0gZnJvbSBcIi4vYXBwXCI7XG5pbXBvcnQgQm9vayBmcm9tIFwiLi9Cb29rXCI7XG5pbXBvcnQgeyB0cmlnZ2VyUG9wb3ZlciB9IGZyb20gXCIuL3BvcG92ZXJcIjtcblxuY29uc3QgYm9va3NCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNib29rc0JvZHlcIikhO1xuXG5jbGFzcyBMaWJyYXJ5IHtcbiAgI2Jvb2tzOiBCb29rW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy4jYm9va3MgPSBbXVxuICB9XG5cbiAgYWRkQm9vayh0aXRsZTogc3RyaW5nLCBhdXRob3I6IHN0cmluZywgcGFnZXM6IG51bWJlciwgaXNSZWFkOiBib29sZWFuKTogdm9pZCB7XG4gICAgY29uc3QgaWQgPSB0aGlzLiNib29rcy5sZW5ndGggPT09IDAgPyAxIDogTWF0aC5tYXgoLi4udGhpcy4jYm9va3MubWFwKGJvb2sgPT4gYm9vay5pZCkpICsgMTtcbiAgICBjb25zdCBuZXdCb29rID0gbmV3IEJvb2soaWQsIHRpdGxlLCBhdXRob3IsIHBhZ2VzLCBpc1JlYWQpO1xuICAgIHRoaXMuI2Jvb2tzLnB1c2gobmV3Qm9vayk7XG5cbiAgICB0cmlnZ2VyUG9wb3ZlcigpO1xuXG4gICAgdGhpcy5sb2FkTGlicmFyeSgpO1xuICB9XG5cbiAgZmlsbExpYnJhcnkoKTogdm9pZCB7XG4gICAgY29uc3QgYm9vazEgPSBuZXcgQm9vaygxLCBcIlplcm8gVG8gT25lXCIsIFwiUGV0ZXIgVGhpZWxcIiwgMjEwLCB0cnVlKTtcbiAgICBjb25zdCBib29rMiA9IG5ldyBCb29rKDIsIFwiSGFja2VycyAmIFBhaW50ZXJzXCIsIFwiUGF1bCBHcmFoYW1cIiwgMjU4LCB0cnVlKTtcbiAgICBjb25zdCBib29rMyA9IG5ldyBCb29rKDMsIFwiQ29tcHV0ZXIgU2NpZW5jZSBEaXN0aWxsZWRcIiwgXCJXbGFkc3RvbiBGZXJyZWlyYSBGaWxob1wiLCAxNjgsIHRydWUpO1xuICAgIGNvbnN0IGJvb2s0ID0gbmV3IEJvb2soNCwgXCJHcm9ra2luZyBBbGdvcml0aG1zXCIsIFwiQWRpdHlhIFkuIEJoYXJnYXZhXCIsIDIzOCwgdHJ1ZSk7XG4gICAgY29uc3QgYm9vazUgPSBuZXcgQm9vayg1LCBcIlNUQVJUIFNNQUxMLCBTVEFZIFNNQUxMXCIsIFwiUm9iIFdhbGxpbmdcIiwgMjAxLCBmYWxzZSk7XG4gICAgdGhpcy4jYm9va3MucHVzaChib29rMSwgYm9vazIsIGJvb2szLCBib29rNCwgYm9vazUpO1xuICB9O1xuXG4gIGxvYWRMaWJyYXJ5KCkge1xuICAgIGNvbnN0IHRhYmVsRGF0YSA9IHRoaXMuZ2V0Qm9va3MoKVxuICAgICAgLm1hcCgodmFsdWUpID0+IHtcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgPHRyPlxuICAgICAgICAgIDx0ZD4gJHt2YWx1ZS50aXRsZX0gPC90ZD5cbiAgICAgICAgICA8dGQ+ICR7dmFsdWUuYXV0aG9yfSA8L3RkPlxuICAgICAgICAgIDx0ZD4gJHt2YWx1ZS5wYWdlc30gPC90ZD5cbiAgICAgICAgICA8dGQ+IFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNoZWNrXCI+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1jaGVjay1sYWJlbFwiIGZvcj1cImZsZXhDaGVja0RlZmF1bHQtJHt2YWx1ZS5pZH1cIj5SZWFkPC9sYWJlbD5cbiAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNoZWNrLWlucHV0XCIgdHlwZT1cImNoZWNrYm94XCIgdmFsdWU9XCJcIiBpZD1cImZsZXhDaGVja0RlZmF1bHQtJHt2YWx1ZS5pZH1cIiAke3RoaXMuZ2V0Q2hlY2tlZEF0dHJpYnV0ZSh2YWx1ZS5pc1JlYWQpfT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L3RkPlxuICAgICAgICAgIDx0ZD4gPGJ1dHRvbiB2YWx1ZT1cIiR7dmFsdWUuaWR9XCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiPlJlbW92ZTwvYnV0dG9uPiA8L3RkPlxuICAgICAgICA8L3RyPmA7XG4gICAgICB9KVxuICAgICAgLmpvaW4oXCJcIik7XG5cbiAgICBib29rc0JvZHkuaW5uZXJIVE1MID0gdGFiZWxEYXRhO1xuXG4gICAgdGhpcy5hZGREZWxldGVFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuYWRkSXNSZWFkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfTtcblxuICBnZXRCb29rcygpOiBCb29rW10ge1xuICAgIHJldHVybiB0aGlzLiNib29rcztcbiAgfVxuXG4gIHJlbW92ZUJvb2soYm9va0lkOiBudW1iZXIpOiBCb29rW10ge1xuICAgIHRoaXMuI2Jvb2tzID0gdGhpcy4jYm9va3MuZmlsdGVyKGJvb2sgPT4gYm9vay5pZCAhPT0gYm9va0lkKTtcblxuICAgIHRoaXMubG9hZExpYnJhcnkoKVxuXG4gICAgcmV0dXJuIHRoaXMuI2Jvb2tzO1xuICB9XG5cbiAgZ2V0Q2hlY2tlZEF0dHJpYnV0ZShpc1JlYWQ6IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gaXNSZWFkID8gJ2NoZWNrZWQnIDogJyc7XG4gIH1cblxuICB1cGRhdGVJc1JlYWQoYm9va0lkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgYm9vayA9IHRoaXMuI2Jvb2tzLmZpbmQoYm9vayA9PiBib29rLmlkID09PSBib29rSWQpO1xuXG4gICAgaWYgKGJvb2spIHtcbiAgICAgIGJvb2suaXNSZWFkID0gIWJvb2suaXNSZWFkO1xuXG4gICAgICB0aGlzLmxvYWRMaWJyYXJ5KClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcIm5vIGJvb2sgZm91bmRcIik7XG4gICAgfVxuICB9XG5cbiAgYWRkRGVsZXRlRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgY29uc3QgZGVsZXRlQnV0dG9uc05vZGVMaXN0OiBOb2RlTGlzdE9mPEVsZW1lbnQ+ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImJ1dHRvbi5idG4tZGFuZ2VyXCIpO1xuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbnM6IEhUTUxCdXR0b25FbGVtZW50W10gPSBBcnJheS5mcm9tKGRlbGV0ZUJ1dHRvbnNOb2RlTGlzdCkubWFwKG5vZGUgPT4gbm9kZSBhcyBIVE1MQnV0dG9uRWxlbWVudCk7XG5cbiAgICBkZWxldGVCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgIGNvbnN0IGJvb2tJZCA9IHBhcnNlSW50KHRhcmdldC52YWx1ZSk7XG5cbiAgICAgICAgICBteUxpYnJhcnkucmVtb3ZlQm9vayhib29rSWQpO1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJc1JlYWRFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja2JveE5vZGVMaXN0OiBOb2RlTGlzdE9mPEVsZW1lbnQ+ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4gICAgY29uc3QgY2hlY2tib3hlczogSFRNTElucHV0RWxlbWVudFtdID0gQXJyYXkuZnJvbShjaGVja2JveE5vZGVMaXN0KS5tYXAobm9kZSA9PiBub2RlIGFzIEhUTUxJbnB1dEVsZW1lbnQpO1xuICAgIGNvbnN0IGZpbHRlcmVkQ2hlY2tib3hlcyA9IGNoZWNrYm94ZXMuZmlsdGVyKGNoZWNrYm94ID0+IGNoZWNrYm94LmlkICE9PSBcImlucHV0SXNSZWFkXCIpXG5cbiAgICBmaWx0ZXJlZENoZWNrYm94ZXMuZm9yRWFjaCgoY2hlY2tib3gpID0+IHtcbiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gY2hlY2tib3guaWQubWF0Y2goL1xcZCskLyk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIGNvbnN0IGJvb2tJZCA9IHBhcnNlSW50KG1hdGNoWzBdLCAxMCk7XG5cbiAgICAgICAgICBteUxpYnJhcnkudXBkYXRlSXNSZWFkKGJvb2tJZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignTm8gbnVtZXJpYyBwYXJ0IGZvdW5kIGluIHRoZSBpZCcpXG4gICAgICAgIH1cblxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGlicmFyeTsiLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IEZvcm1IYW5kbGVyIGZyb20gXCIuL2Zvcm1IYW5kbGVyXCI7XG5pbXBvcnQgc29ydFRhYmxlQnlDb2x1bW4gZnJvbSBcIi4vc29ydFwiO1xuaW1wb3J0IExpYnJhcnkgZnJvbSBcIi4vTGlicmFyeVwiO1xuXG5pbXBvcnQgJy4vc3R5bGVzLmNzcyc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgY29uc3QgZm9ybUhhbmRsZXIgPSBGb3JtSGFuZGxlci5jcmVhdGUoKTtcbiAgZm9ybUhhbmRsZXIuaW5pdGlhbGl6ZUV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwidGFibGVcIikgYXMgSFRNTFRhYmxlRWxlbWVudDtcbiAgaWYgKHRhYmxlKSB7XG4gICAgc29ydFRhYmxlQnlDb2x1bW4odGFibGUsIDAsIHRydWUpO1xuICB9XG59KVxuXG5leHBvcnQgY29uc3QgbXlMaWJyYXJ5ID0gbmV3IExpYnJhcnkoKTtcblxubXlMaWJyYXJ5LmZpbGxMaWJyYXJ5KCk7XG5cbm15TGlicmFyeS5sb2FkTGlicmFyeSgpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic3VibWl0QnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGFuZGxlRm9ybVN1Ym1pc3Npb24iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidGl0bGUiLCJhdXRob3IiLCJwYWdlcyIsImlzUmVhZCIsInZhbHVlIiwicGFyc2VJbnQiLCJjaGVja2VkIiwibXlMaWJyYXJ5IiwiYWRkQm9vayIsImluaXRpYWxpemVFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzb3J0VGFibGVCeUNvbHVtbiIsInRhYmxlIiwiY29sdW1uIiwiYXNjIiwiZGlyTW9kaWZpZXIiLCJ0Qm9keSIsInRCb2RpZXMiLCJzb3J0ZWRSb3dzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInNvcnQiLCJhIiwiYiIsInRleHRDb250ZW50IiwidHJpbSIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImFwcGVuZCIsImZvckVhY2giLCJ0aCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRvZ2dsZSIsImhlYWRlckNlbGwiLCJwYXJlbnRFbGVtZW50IiwiaW5kZXhPZiIsImNoaWxkcmVuIiwiY29udGFpbnMiLCJjb25zdHJ1Y3RvciIsImlkIiwidGhpcyIsIm5ld1RpdGxlIiwibmV3QXV0aG9yIiwibmV3UGFnZXMiLCJuZXdJc1JlYWQiLCJwb3BvdmVyVHJpZ2dlciIsImJvb3RzdHJhcCIsIlBvcG92ZXIiLCJib29rc0JvZHkiLCJsZW5ndGgiLCJNYXRoIiwibWF4IiwibWFwIiwiYm9vayIsIm5ld0Jvb2siLCJwdXNoIiwibW9kYWwiLCJtb2RhbFBvcG92ZXIiLCJidXR0b25MaW5rIiwiY29uc29sZSIsImVycm9yIiwicG9wb3Zlckluc3RhbmNlIiwiZ2V0SW5zdGFuY2UiLCJzdHlsZSIsInBvaW50ZXJFdmVudHMiLCJjb2xvciIsInNldFRpbWVvdXQiLCJkaXNwbGF5Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiYmFja2Ryb3AiLCJoaWRlTW9kYWwiLCJyZXN0QnV0dG9uTGluayIsImhpZGUiLCJ0cmlnZ2VyUG9wb3ZlciIsImxvYWRMaWJyYXJ5IiwiZmlsbExpYnJhcnkiLCJib29rMSIsImJvb2syIiwiYm9vazMiLCJib29rNCIsImJvb2s1IiwidGFiZWxEYXRhIiwiZ2V0Qm9va3MiLCJnZXRDaGVja2VkQXR0cmlidXRlIiwiam9pbiIsImlubmVySFRNTCIsImFkZERlbGV0ZUV2ZW50TGlzdGVuZXJzIiwiYWRkSXNSZWFkRXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVCb29rIiwiYm9va0lkIiwiZmlsdGVyIiwidXBkYXRlSXNSZWFkIiwiZmluZCIsImRlbGV0ZUJ1dHRvbnNOb2RlTGlzdCIsIm5vZGUiLCJidXR0b24iLCJ0YXJnZXQiLCJjaGVja2JveE5vZGVMaXN0IiwiY2hlY2tib3giLCJtYXRjaCJdLCJzb3VyY2VSb290IjoiIn0=